[gd_scene load_steps=12 format=3 uid="uid://8bljyua7jqtb"]

[ext_resource type="Script" uid="uid://disvfacx4aj2d" path="res://src/csharp/Map.cs" id="1_ed3f1"]
[ext_resource type="Shader" uid="uid://etl1fouj3y0j" path="res://map/shaders/map3d.gdshader" id="2_k3i6m"]
[ext_resource type="Texture2D" uid="uid://dtelfrbnn0q48" path="res://map/map_data/NormalMap.bmp" id="3_l5eal"]
[ext_resource type="Texture2D" uid="uid://d174hxgwn5ac2" path="res://map/map_data/TerrainMap.png" id="4_l8rgf"]
[ext_resource type="Material" uid="uid://b62uxcw6bw4d6" path="res://map/shaders/map2D.tres" id="5_1us0v"]

[sub_resource type="PlaneMesh" id="PlaneMesh_4hjbm"]
size = Vector2(563.2, 211.2)

[sub_resource type="ViewportTexture" id="ViewportTexture_7lyie"]
viewport_path = NodePath("MeshInstance3D/SubViewport2")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_5jdw0"]
resource_local_to_scene = true
render_priority = 1
transparency = 1
albedo_texture = SubResource("ViewportTexture_7lyie")
albedo_texture_msdf = true
msdf_pixel_range = 8.0
msdf_outline_size = 1.0
distance_fade_mode = 1

[sub_resource type="ViewportTexture" id="ViewportTexture_4hjbm"]
viewport_path = NodePath("MeshInstance3D/SubViewport")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_lgq1i"]
resource_local_to_scene = true
render_priority = 0
next_pass = SubResource("StandardMaterial3D_5jdw0")
shader = ExtResource("2_k3i6m")
shader_parameter/terrain_image = ExtResource("4_l8rgf")
shader_parameter/subview_image = SubResource("ViewportTexture_4hjbm")
shader_parameter/normalmap_image = ExtResource("3_l5eal")
shader_parameter/threshold = 0.1
shader_parameter/aa_scale = 17.6
shader_parameter/base_line_thickness = 0.38197

[sub_resource type="BoxShape3D" id="BoxShape3D_lgq1i"]
size = Vector3(563.2, 1, 211.2)

[node name="Map" type="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 281.6, 0, 105.6)
script = ExtResource("1_ed3f1")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
mesh = SubResource("PlaneMesh_4hjbm")
surface_material_override/0 = SubResource("ShaderMaterial_lgq1i")

[node name="SubViewport" type="SubViewport" parent="MeshInstance3D"]
canvas_cull_mask = 4294967293
size = Vector2i(5632, 2112)

[node name="Sprite2D" type="Sprite2D" parent="MeshInstance3D/SubViewport"]
material = ExtResource("5_1us0v")
texture = ExtResource("4_l8rgf")
centered = false

[node name="SubViewport2" type="SubViewport" parent="MeshInstance3D"]
transparent_bg = true
canvas_item_default_texture_filter = 3
size = Vector2i(5632, 2112)

[node name="CountryLabels" type="Node" parent="MeshInstance3D/SubViewport2"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("BoxShape3D_lgq1i")

[node name="WrapLeftMesh" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -563.2, 0, 0)
mesh = SubResource("PlaneMesh_4hjbm")
skeleton = NodePath("../MeshInstance3D")
surface_material_override/0 = SubResource("ShaderMaterial_lgq1i")

[node name="SubViewport" type="SubViewport" parent="WrapLeftMesh"]
canvas_cull_mask = 4294967293
size = Vector2i(5632, 2112)

[node name="Sprite2D" type="Sprite2D" parent="WrapLeftMesh/SubViewport"]
material = ExtResource("5_1us0v")
texture = ExtResource("4_l8rgf")
centered = false

[node name="SubViewport2" type="SubViewport" parent="WrapLeftMesh"]
transparent_bg = true
canvas_item_default_texture_filter = 3
size = Vector2i(5632, 2112)

[node name="CountryLabels" type="Node" parent="WrapLeftMesh/SubViewport2"]

[node name="VisibleOnScreenNotifier3D" type="VisibleOnScreenNotifier3D" parent="WrapLeftMesh"]

[node name="WrapLeftCollisionShape" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -563.2, 0, 0)
shape = SubResource("BoxShape3D_lgq1i")

[node name="WrapRightMesh" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 563.2, 0, 0)
mesh = SubResource("PlaneMesh_4hjbm")
skeleton = NodePath("../WrapLeftMesh")
surface_material_override/0 = SubResource("ShaderMaterial_lgq1i")

[node name="SubViewport" type="SubViewport" parent="WrapRightMesh"]
canvas_cull_mask = 4294967293
size = Vector2i(5632, 2112)

[node name="Sprite2D" type="Sprite2D" parent="WrapRightMesh/SubViewport"]
material = ExtResource("5_1us0v")
texture = ExtResource("4_l8rgf")
centered = false

[node name="SubViewport2" type="SubViewport" parent="WrapRightMesh"]
transparent_bg = true
canvas_item_default_texture_filter = 3
size = Vector2i(5632, 2112)

[node name="CountryLabels" type="Node" parent="WrapRightMesh/SubViewport2"]

[node name="VisibleOnScreenEnabler3D" type="VisibleOnScreenEnabler3D" parent="WrapRightMesh"]

[node name="WrapRightCollisionShape" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 563.2, 0, 0)
shape = SubResource("BoxShape3D_lgq1i")
